(()=>{"use strict";function e(e){return JSON.parse(localStorage.allTasks).filter((t=>t.project===e))}const t=document.querySelector("#submitTask");function o(e,t,o,c){this.project=e,this.title=t,this.date=o,this.description=c}const c=document.querySelector("#cancelTask");function l(){document.querySelectorAll(".expandBtn").forEach((e=>{e.addEventListener("click",(function(e){let t=document.createElement("div");t.classList.add("descriptionBox");let o=e.target.closest("div"),c=o.querySelector(".taskTitle").textContent,l=o.querySelector(".taskDate").textContent,n=o.querySelector(".taskTitle").textContent.trim(),r=(a=n,JSON.parse(localStorage.getItem("allTasks")).filter((e=>e.title==a)))[0].description;var a;t.innerHTML=`\n                <h3>${c}</h3>\n                <p class = 'description'> ${r}  </p>\n                <p class = 'dateDescription'>${l}</p>\n                <input class = 'delDescription' type = button value = 'x'></input>`,document.querySelector("#todos").appendChild(t),document.querySelectorAll(".delDescription").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".descriptionBox").forEach((e=>e.remove()))}))}))}))}))}const n=document.querySelector("#addItem");let r=[];function a(e,t){let o=document.createElement("div");o.classList.add(t),o.textContent=e,document.querySelector("header").appendChild(o),setTimeout((()=>document.querySelector("header").removeChild(o)),2e3)}if(document.querySelector("#projectSubmit").addEventListener("click",(function(){""!==document.querySelector("#projectName").value?a("Project added!","success-msg"):a("please name your project!","alert-msg")})),0==localStorage.hasOwnProperty("projects")){let e=JSON.stringify(["Your Project"]);localStorage.setItem("projects",e)}n.addEventListener("click",(function(){const e=document.querySelector("#popUpForm");"none"===e.style.display?(n.value="x",e.style.display="block"):(n.value="+",e.style.display="none")})),function(){const e=document.querySelector("#projectName"),t=document.querySelector("#projectSubmit"),o=document.querySelector("#projectDelete");localStorage.hasOwnProperty("projects")&&(r=JSON.parse(localStorage.getItem("projects")),console.log(localStorage.projects)),t.addEventListener("click",(function(){if(""!==e.value){r.push(e.value);let t=JSON.stringify(r);localStorage.setItem("projects",t)}e.value=""})),o.addEventListener("click",(function(){let e=document.querySelector(".activeProject"),t=(o=e.textContent,JSON.parse(localStorage.allTasks).filter((e=>e.project!==o)));var o;let c=JSON.stringify(t);localStorage.setItem("allTasks",c)})),o.addEventListener("click",(function(){let e=document.querySelector(".activeProject");e.parentNode.removeChild(e);let t=JSON.parse(localStorage.getItem("projects"));t.splice(e.dataset.index,1);let o=JSON.stringify(t);localStorage.setItem("projects",o),document.querySelector("#tasksContainer").innerHTML=""}))}(),function(){const e=document.querySelector("#projectList");JSON.parse(localStorage.getItem("projects")).forEach((t=>{let o=document.createElement("div");o.textContent=t,e.appendChild(o)}))}(),function(){const e=document.querySelectorAll("#projectList div");e.forEach((t=>{t.addEventListener("click",(t=>{e.forEach((e=>{e.classList.remove("activeProject")})),t.target.classList.add("activeProject")}))}))}(),document.querySelectorAll("#projectList div").forEach(((e,t)=>e.setAttribute("data-index",t))),l(),c.addEventListener("click",(function(){document.querySelector("#todoName").value="",document.querySelector("#dateSet").value="",document.querySelector("#descriptionBox").value="";const e=document.querySelector("#addItem"),t=document.querySelector("#popUpForm");e.value="+",t.style.display="none"})),function(){const e=document.querySelector("#todoName"),c=document.querySelector("#dateSet"),l=document.querySelector("#descriptionBox");let n=[];t.addEventListener("click",(function(){let t=document.querySelector(".activeProject");if(localStorage.hasOwnProperty("allTasks")&&(n=JSON.parse(localStorage.getItem("allTasks"))),""==e.value||""==c.value||""==l.value)a("please fill in all fields!","alert-msg");else if(null===t)a("please select a project","alert-msg");else{let r=new o(t.textContent,e.value,c.value,l.value);n.push(r);let s=JSON.stringify(n);localStorage.setItem("allTasks",s),e.value="",c.value="",l.value="";const i=document.querySelector("#addItem"),u=document.querySelector("#popUpForm");i.value="+",u.style.display="none",a("Task Added!","success-msg")}}))}(),document.querySelectorAll("#projectList div").forEach((t=>{t.addEventListener("click",(function(t){document.querySelector("#tasksContainer").innerHTML="";let o=t.target.textContent;localStorage.hasOwnProperty("allTasks")&&e(o).forEach((e=>{let t=document.createElement("div");t.classList.add("taskTodo"),t.innerHTML=`\n                    <h3 class = 'taskTitle'> ${e.title} </h3> \n                    <p class = 'taskDate'>Expires: ${e.date}</p>\n                    <input type = button class = 'delBtn' value = 'x'></input>\n                    <input type = button class = 'expandBtn' value = '...'></input>\n                    `,document.querySelector("#tasksContainer").appendChild(t),l()}))}))})),t.addEventListener("click",(function(){localStorage.hasOwnProperty("allTasks")&&(document.querySelector("#tasksContainer").innerHTML="",e(document.querySelector(".activeProject").textContent).forEach((e=>{let t=document.createElement("div");t.classList.add("taskTodo"),t.innerHTML=`\n                <h3 class = 'taskTitle'> ${e.title} </h3> \n                <p class = 'taskDate'>Expires: ${e.date}</p>\n                <input type = button class = 'delBtn' value = 'x'></input>\n                <input type = button class = 'expandBtn' value = '...'></input>\n                `,document.querySelector("#tasksContainer").appendChild(t),l()})))})),console.log(r),console.table(localStorage)})();